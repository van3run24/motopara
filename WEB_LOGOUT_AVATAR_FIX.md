# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞ –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –∏ –∞–≤–∞—Ç–∞—Ä–∞

## üêå –ü—Ä–æ–±–ª–µ–º—ã:
1. **–í—ã—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º
2. **–ê–≤–∞—Ç–∞—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥–∞–ª–µ—Ä–µ—é** - —Ñ–æ—Ç–æ –∏–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–±—ã—á–Ω—ã–º —Ñ–æ—Ç–æ

## üîç –ü—Ä–∏—á–∏–Ω—ã:

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤—ã—Ö–æ–¥–æ–º:
- `window.location.href` –Ω–µ –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è React
- –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `window.location.reload(true)` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤–∞—Ç–∞—Ä–æ–º:
- –í `handleImageUpload` –±—ã–ª–∞ –ª–æ–≥–∏–∫–∞:
```javascript
if (isProfile && userId) {
  // –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
  if (!userImages.includes(imageUrl)) {
    await updateGallery([imageUrl, ...userImages]); // –ü–†–û–ë–õ–ï–ú–ê!
  }
}
```

## üîß –†–µ—à–µ–Ω–∏—è:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞
```javascript
// –ë—ã–ª–æ:
window.location.href = window.location.origin;

// –°—Ç–∞–ª–æ:
window.location.reload(true); // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
```javascript
// –ë—ã–ª–æ:
if (isProfile && userId) {
  const imageUrl = await userService.uploadAvatar(userId, file);
  await supabase.from('users').update({ image: imageUrl }).eq('id', userId);
  setUserData({...userData, image: imageUrl});
  if (!userImages.includes(imageUrl)) {
    await updateGallery([imageUrl, ...userImages]); // –£–î–ê–õ–ï–ù–û
  }
}

// –°—Ç–∞–ª–æ:
if (isProfile && userId) {
  const imageUrl = await userService.uploadAvatar(userId, file);
  await supabase.from('users').update({ image: imageUrl }).eq('id', userId);
  setUserData({...userData, image: imageUrl});
  // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –≤ –≥–∞–ª–µ—Ä–µ—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
}
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –í—ã—Ö–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **–í–µ–±-–≤–µ—Ä—Å–∏—è:** –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **PWA:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ fallback

### ‚úÖ –ê–≤–∞—Ç–∞—Ä –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≥–∞–ª–µ—Ä–µ—é:
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞:** –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç `userData.image`
- **–ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–ª–µ—Ä–µ–∏:** –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –≤ `userImages`
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –¢–µ—Å—Ç 1: –í—ã—Ö–æ–¥ –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
1. –í–æ–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í—ã–π—Ç–∏"
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥

### –¢–µ—Å—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
1. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã
2. –ù–∞–∂–∞—Ç—å "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ"
3. –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ
4. **–û–∂–∏–¥–∞–Ω–∏–µ:** –ê–≤–∞—Ç–∞—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –Ω–æ –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥–∞–ª–µ—Ä–µ—é

### –¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–ª–µ—Ä–µ–∏
1. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã
2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ—é"
3. –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ
4. **–û–∂–∏–¥–∞–Ω–∏–µ:** –§–æ—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥–∞–ª–µ—Ä–µ—é, –Ω–æ –ù–ï –º–µ–Ω—è–µ—Ç –∞–≤–∞—Ç–∞—Ä

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/components/MainApp.jsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—ã—Ö–æ–¥ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- –í—ã—Ö–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö
- –ê–≤–∞—Ç–∞—Ä –∏ –≥–∞–ª–µ—Ä–µ—è —á–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
