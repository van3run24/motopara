# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ

## üêå –ü—Ä–æ–±–ª–µ–º—ã:
1. **–í—ã—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –≤ PWA
2. **–§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –≤–æ–æ–±—â–µ

## üîç –ü—Ä–∏—á–∏–Ω—ã:

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤—ã—Ö–æ–¥–æ–º:
- `window.location.href` –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `window.location.reload()`
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—à–∞–ª–æ –¥—Ä—É–≥–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ:
- `setIsUploading(true)` –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ –≤—Å–µ –∫–Ω–æ–ø–∫–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `userId`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞ –≤ –ë–î
- –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üîß –†–µ—à–µ–Ω–∏—è:

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
```javascript
// –ë—ã–ª–æ:
const [isUploading, setIsUploading] = useState(false);

// –°—Ç–∞–ª–æ:
const [isUploading, setIsUploading] = useState(false);
const [isLoggingOut, setIsLoggingOut] = useState(false);
```

### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥
```javascript
const handleLogout = async () => {
  try {
    setIsLoggingOut(true);
    await supabase.auth.signOut();
    localStorage.removeItem('userId');
    localStorage.removeItem('userImages');
    localStorage.removeItem('supabase.auth.token');
    localStorage.removeItem('supabase.auth.refreshToken');
    
    // –ù–∞–¥–µ–∂–Ω—ã–π –≤—ã—Ö–æ–¥ –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    setTimeout(() => {
      window.location.reload();
    }, 100);
  } catch (error) {
    console.error('Error signing out:', error);
    setTimeout(() => {
      window.location.reload();
    }, 100);
  }
};
```

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
```javascript
const handleImageUpload = async (e, isProfile = false, isGallery = false) => {
  if (!e.target.files || e.target.files.length === 0) return;

  try {
    setIsUploading(true);
    const userId = localStorage.getItem('userId');
    
    if (!userId) {
      throw new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
    }
    
    if (isProfile) {
      const file = e.target.files[0];
      console.log('Uploading avatar:', file.name);
      const imageUrl = await userService.uploadAvatar(userId, file);
      console.log('Avatar uploaded:', imageUrl);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
      setUserData(prev => ({...prev, image: imageUrl}));
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –≤ –≥–∞–ª–µ—Ä–µ—é
      if (!userImages.includes(imageUrl)) {
        await updateGallery([imageUrl, ...userImages]);
      }
    } else if (isGallery) {
      const file = e.target.files[0];
      console.log('Uploading gallery image:', file.name);
      const imageUrl = await userService.uploadGalleryImage(userId, file);
      console.log('Gallery image uploaded:', imageUrl);
      
      // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ—é
      await updateGallery([...userImages, imageUrl]);
    }
  } catch (err) {
    console.error('Error uploading image:', err);
    setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ: ' + err.message);
    alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ: ' + err.message);
  } finally {
    setIsUploading(false);
  }
};
```

### 4. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
```javascript
// –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
<button>
  <div className="flex items-center gap-4 text-red-500">
    {isLoggingOut ? (
      <div className="w-5 h-5 border-2 border-red-500 border-t-transparent rounded-full animate-spin"></div>
    ) : (
      <LogOut size={20}/>
    )}
    <span>{isLoggingOut ? '–í—ã—Ö–æ–¥...' : '–í—ã–π—Ç–∏'}</span>
  </div>
</button>

// –ö–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
<button disabled={isUploading}>
  {isUploading ? (
    <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
  ) : (
    '–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ'
  )}
</button>
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –í—ã—Ö–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **–ü–ö:** `window.location.reload()` –Ω–∞–¥–µ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ú–æ–±–∏–ª—å–Ω—ã–µ:** –¢–∞ –∂–µ –ª–æ–≥–∏–∫–∞, –Ω–æ –±–æ–ª–µ–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞
- **PWA:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä:** –°–ø–∏–Ω–Ω–µ—Ä –∏ —Ç–µ–∫—Å—Ç "–í—ã—Ö–æ–¥..."

### ‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ userId:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** Alert —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π:** –í—ã—Ö–æ–¥ –Ω–µ –º–µ—à–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫–µ

### ‚úÖ –£–ª—É—á—à–µ–Ω UX:
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** –°–ø–∏–Ω–Ω–µ—Ä—ã –Ω–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏:** –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –ö–Ω–æ–ø–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤–æ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –¢–µ—Å—Ç 1: –í—ã—Ö–æ–¥ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
2. –ù–∞–∂–∞—Ç—å "–í—ã–π—Ç–∏"
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –°–ø–∏–Ω–Ω–µ—Ä ‚Üí –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ ‚Üí –ª–µ–Ω–¥–∏–Ω–≥

### –¢–µ—Å—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ"
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –°–ø–∏–Ω–Ω–µ—Ä ‚Üí –∞–≤–∞—Ç–∞—Ä –º–µ–Ω—è–µ—Ç—Å—è ‚Üí —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ–µ

### –¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–ª–µ—Ä–µ–∏
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "+" –≤ –≥–∞–ª–µ—Ä–µ–µ
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –°–ø–∏–Ω–Ω–µ—Ä ‚Üí —Ñ–æ—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è ‚Üí –∞–≤–∞—Ç–∞—Ä –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è

### –¢–µ—Å—Ç 4: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
1. –ù–∞—á–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–π—Ç–∏
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/components/MainApp.jsx` - –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- –†–∞–∑–¥–µ–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤—ã—Ö–æ–¥–∞
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –û–±–µ—Å–ø–µ—á–µ–Ω–∞ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
