# üöÄ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã!

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `push_subscriptions` 
- –î–æ–±–∞–≤–ª–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `upsert_push_subscription`

### 2. Frontend
- –û–±–Ω–æ–≤–ª–µ–Ω `main.jsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push
- –°–æ–∑–¥–∞–Ω API endpoint `/api/save-push-subscription.js`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sendPushNotification` –≤ SupabaseManager
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. Backend  
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ Supabase Edge Function `send-push`
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ —Å FCM –Ω–∞ Web Push Protocol
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL:
```bash
# –í Supabase Dashboard ‚Üí SQL Editor
psql -f create_push_subscriptions_table.sql
```

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VAPID –∫–ª—é—á–∏:
```bash
npm install web-push
node generate_vapid_keys.js
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ environment:
- **Supabase Dashboard ‚Üí Settings ‚Üí Edge Functions**:
  - `VAPID_PUBLIC_KEY` = (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á)
  - `VAPID_PRIVATE_KEY` = (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á)  
  - `VAPID_SUBJECT` = `mailto:your-email@example.com`

### 4. –û–±–Ω–æ–≤–∏—Ç—å VAPID –∫–ª—é—á –≤ main.jsx:
–ó–∞–º–µ–Ω–∏ `BLc1xPvF8jHq3xL8f9k2mN4p7r6sT5uV8wX2yZ1aQ3bC4dE5fG6hI7jK8lM9nO0p` –Ω–∞ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

### 5. –î–µ–ø–ª–æ–π:
```bash
# –î–µ–ø–ª–æ–π Edge Function
supabase functions deploy send-push

# –î–µ–ø–ª–æ–π API endpoint (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Vercel/Netlify)
vercel --prod
```

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏ –≤—Ö–æ–¥–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. **–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ, –∏ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ  
3. **Push —Ä–∞–±–æ—Ç–∞–µ—Ç**: –î–∞–∂–µ –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ
4. **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Chrome/Firefox
2. –†–∞–∑—Ä–µ—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
3. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ó–∞–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!

## üîç –û—Ç–ª–∞–¥–∫–∞:

- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Å—å —á—Ç–æ VAPID –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `push_subscriptions` —Å–æ–∑–¥–∞–Ω–∞

–ì–æ—Ç–æ–≤–æ! üéâ
